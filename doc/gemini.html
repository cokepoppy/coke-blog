import React, { useState, useEffect } from 'react';
import { ArrowRight, ArrowLeft, Clock, Calendar, Share2, Twitter, Linkedin, Facebook, Mail, Sparkles, Loader2, CheckCircle2, PenLine } from 'lucide-react';

// --- Color Palette (Claude-esque Tones) ---
// Updated to "Muted Earth Tones" for better visibility while keeping elegance
const COVER_COLORS = [
  "#D6D1CB", // Warm Stone (Darker)
  "#C9C4BC", // Taupe
  "#D1D5DB", // Cool Grey
  "#CED4C8", // Sage Green Grey
  "#DBCDC8", // Dusty Rose
  "#C8D1D6", // Muted Blue Grey
  "#D4CFC5", // Sand
  "#D1C8C3"  // Warm Brown Grey
];

const getRandomColor = () => COVER_COLORS[Math.floor(Math.random() * COVER_COLORS.length)];

// --- Mock Data ---

const INITIAL_POSTS = [
  {
    id: 1,
    title: "构建可信赖的通用人工智能",
    excerpt: "探讨在追求通用人工智能（AGI）的过程中，如何将安全性、诚实性和对人类价值观的对齐置于核心位置。",
    category: "AI Safety",
    date: "2023年 10月 24日",
    readTime: "8 分钟阅读",
    author: "张三",
    coverColor: "#D6D1CB", // Updated
    content: (
      <>
        <p className="mb-6 first-letter:text-5xl first-letter:font-serif first-letter:font-bold first-letter:float-left first-letter:mr-3 first-letter:mt-[-4px]">
          在人工智能快速发展的今天，"对齐"（Alignment）不仅仅是一个技术术语，它是我们构建未来的基石。当我们谈论由宪法AI（Constitutional AI）驱动的系统时，我们实际上是在谈论如何让机器理解并尊重人类的复杂价值观。
        </p>
        <h3 className="font-serif text-2xl font-medium mt-8 mb-4">核心原则的演变</h3>
        <p className="mb-6">
          过去，我们主要依靠强化学习来训练模型。虽然有效，但它往往缺乏透明度。现在，我们需要一种更类似于人类社会契约的方法。通过明确定义的原则——例如“由联合国人权宣言指导”或“避免有害偏见”——我们可以让AI的决策过程更加可解释。
        </p>
        <blockquote className="border-l-2 border-stone-800 pl-6 italic my-8 text-xl font-serif text-stone-700">
          "技术不仅要聪明，更要仁慈。我们在代码中写入的不仅仅是逻辑，更是我们对未来的期许。"
        </blockquote>
        <h3 className="font-serif text-2xl font-medium mt-8 mb-4">透明度与可解释性</h3>
        <p className="mb-6">
          黑盒模型不再被接受。我们需要能够打开引擎盖，观察齿轮是如何转动的。这不仅是为了调试，更是为了建立信任。当用户知道AI为什么给出这个答案时，这种互动才是有意义的。
        </p>
        <p className="mb-6">
          未来的道路充满挑战，但如果我们坚持这些核心原则，我们相信AGI将成为提升人类福祉的强大工具。
        </p>
      </>
    )
  },
  {
    id: 2,
    title: "设计语言的隐形力量",
    excerpt: "为什么最好的界面设计往往是不可见的？分析极简主义在现代数字产品中的复兴与心理学基础。",
    category: "Design",
    date: "2023年 11月 02日",
    readTime: "5 分钟阅读",
    author: "李四",
    coverColor: "#C9C4BC", // Updated
    content: (
      <>
        <p className="mb-6">
          当我们打开一个精心设计的应用时，我们不应该首先注意到“设计”。相反，我们应该感到一种流畅感。这就是所谓的“隐形设计”。
        </p>
        <h3 className="font-serif text-2xl font-medium mt-8 mb-4">少即是多的误区</h3>
        <p className="mb-6">
          极简主义并不意味着简单地移除元素。它意味着移除干扰，强调本质。就像 Claude 的界面一样，去除多余的装饰，让文字和思想成为主角。这需要设计师对内容的优先级有极深的理解。
        </p>
        <p className="mb-6">
          留白（Negative Space）不是空的，它是活跃的。它引导视线，提供呼吸的空间。在信息过载的时代，留白是一种奢侈品，也是一种必需品。
        </p>
      </>
    )
  },
  {
    id: 3,
    title: "大型语言模型的推理边界",
    excerpt: "深入研究 LLM 在处理复杂逻辑推理任务时的表现，以及思维链（Chain-of-Thought）提示带来的突破。",
    category: "Research",
    date: "2023年 11月 15日",
    readTime: "12 分钟阅读",
    author: "王五",
    coverColor: "#D1D5DB", // Updated
    content: (
      <>
        <p className="mb-6">
          语言模型不仅仅是鹦鹉学舌。最新的研究表明，通过适当的引导，模型展现出了惊人的推理能力。思维链（Chain-of-Thought）提示技术，就像是教小学生解数学题一样，要求模型“一步步思考”。
        </p>
        <p className="mb-6">
          这种中间步骤的生成，不仅提高了准确率，更重要的是，它为我们提供了一个观察模型思考过程的窗口。我们发现，模型在处理多跳推理（Multi-hop reasoning）时，表现出了类似人类的逻辑路径。
        </p>
      </>
    )
  },
  {
    id: 4,
    title: "慢思考：数字时代的阅读复兴",
    excerpt: "在短视频主导的时代，长文阅读和深度思考不仅没有消亡，反而变得更加珍贵。",
    category: "Culture",
    date: "2023年 12月 01日",
    readTime: "6 分钟阅读",
    author: "赵六",
    coverColor: "#CED4C8", // Updated
    content: (
      <>
        <p className="mb-6">
          在这个多巴胺驱动的时代，我们的大脑被训练成渴望即时满足。但是，真正的智慧往往来自于“慢思考”。
        </p>
        <p className="mb-6">
          深度阅读需要耐心，需要我们在文字中沉浸。这种体验是无法被 15 秒的视频所替代的。这就是为什么像 Substack 这样的平台正在兴起，人们渴望有深度的连接和思考。
        </p>
      </>
    )
  },
  {
    id: 5,
    title: "从代码到自然语言：编程的终结？",
    excerpt: "随着 AI 能够理解并生成复杂代码，软件工程师的角色正在从编写者转变为架构师和审查者。",
    category: "Engineering",
    date: "2023年 12月 10日",
    readTime: "9 分钟阅读",
    author: "DevOps",
    coverColor: "#DBCDC8", // Updated
    content: (
      <>
        <p className="mb-6">
          编程语言一直是人类与机器沟通的桥梁。但如果机器能听懂人类的语言，这座桥梁还需要吗？
        </p>
        <p className="mb-6">
          我们正在进入一个“自然语言编程”的时代。这并不意味着程序员会失业，而是意味着门槛的降低和抽象层级的提升。未来的工程师将更多地思考系统设计、数据流和业务逻辑，而不是纠结于语法细节。
        </p>
      </>
    )
  }
];

// --- Components ---

const Header = ({ onHomeClick, onCreateClick, currentView }) => (
  <header className="sticky top-0 z-50 bg-[#F4F3F0]/90 backdrop-blur-md border-b border-stone-200 transition-all duration-300">
    <div className="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
      <div 
        onClick={onHomeClick}
        className="cursor-pointer group flex items-center gap-2"
      >
        <span className="font-serif text-2xl font-bold tracking-tight text-stone-900 group-hover:opacity-70 transition-opacity">
          MyBlog.
        </span>
      </div>

      <nav className="hidden md:flex items-center gap-8 font-sans text-sm font-medium text-stone-600">
        <a href="#" onClick={(e) => { e.preventDefault(); onHomeClick(); }} className={`hover:text-stone-900 transition-colors ${currentView === 'list' ? 'text-stone-900 font-bold' : ''}`}>首页</a>
        <a href="#" className="hover:text-stone-900 transition-colors">专栏</a>
        <a href="#" className="hover:text-stone-900 transition-colors">关于</a>
        
        {/* New 'Create' Button */}
        <button 
          onClick={onCreateClick}
          className="flex items-center gap-2 bg-stone-900 text-[#F4F3F0] px-5 py-2.5 rounded-sm hover:bg-stone-700 transition-all shadow-sm hover:shadow-md active:scale-95"
        >
          <PenLine size={16} />
          <span>开始创作</span>
        </button>
      </nav>

      {/* Mobile Menu Icon Placeholder */}
      <div className="md:hidden text-stone-900">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </div>
    </div>
  </header>
);

const Footer = () => (
  <footer className="bg-stone-100 border-t border-stone-200 pt-16 pb-12 mt-auto">
    <div className="max-w-7xl mx-auto px-6">
      <div className="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
        <div className="col-span-1 md:col-span-2">
          <h4 className="font-serif text-xl font-bold mb-4">MyBlog.</h4>
          <p className="text-stone-500 text-sm max-w-sm leading-relaxed">
            致力于探索人工智能、设计美学与人类未来的交叉点。我们相信清晰的思考和诚实的写作具有改变世界的力量。
          </p>
        </div>
        <div>
          <h5 className="font-sans font-semibold text-sm uppercase tracking-wider text-stone-400 mb-4">栏目</h5>
          <ul className="space-y-3 text-stone-600 text-sm">
            <li><a href="#" className="hover:text-stone-900">AI 安全</a></li>
            <li><a href="#" className="hover:text-stone-900">研究论文</a></li>
            <li><a href="#" className="hover:text-stone-900">工程博客</a></li>
            <li><a href="#" className="hover:text-stone-900">公司动态</a></li>
          </ul>
        </div>
        <div>
          <h5 className="font-sans font-semibold text-sm uppercase tracking-wider text-stone-400 mb-4">关注我们</h5>
          <div className="flex gap-4 text-stone-600">
            <Twitter size={20} className="hover:text-stone-900 cursor-pointer" />
            <Linkedin size={20} className="hover:text-stone-900 cursor-pointer" />
            <Facebook size={20} className="hover:text-stone-900 cursor-pointer" />
          </div>
        </div>
      </div>
      <div className="flex flex-col md:flex-row justify-between items-center pt-8 border-t border-stone-200 text-xs text-stone-500 font-sans">
        <p>© 2024 MyBlog Inc. All rights reserved.</p>
        <div className="flex gap-6 mt-4 md:mt-0">
          <a href="#" className="hover:text-stone-900">隐私政策</a>
          <a href="#" className="hover:text-stone-900">服务条款</a>
        </div>
      </div>
    </div>
  </footer>
);

const BlogPostCard = ({ post, onClick, featured = false }) => {
  return (
    <div 
      onClick={() => onClick(post)}
      className={`group cursor-pointer flex flex-col ${featured ? 'md:grid md:grid-cols-2 md:gap-12 md:items-center' : ''}`}
    >
      {/* Replaced Image with Color Block */}
      <div 
        className={`overflow-hidden rounded-sm mb-6 ${featured ? 'aspect-[16/9] md:h-full' : 'aspect-[4/3]'} transition-transform duration-700 ease-out group-hover:shadow-md`}
        style={{ backgroundColor: post.coverColor }}
      >
        {/* Optional: Add a subtle overlay or pattern if desired, but keeping it simple for now */}
        <div className="w-full h-full opacity-90 group-hover:opacity-100 transition-opacity"></div>
      </div>

      <div className="flex flex-col h-full justify-center">
        <div className="flex items-center gap-3 text-xs font-bold tracking-widest text-[#D97757] uppercase mb-3 font-sans">
          <span>{post.category}</span>
          <span className="w-1 h-1 rounded-full bg-stone-300"></span>
          <span className="text-stone-500 font-medium">{post.date}</span>
        </div>
        
        <h3 className={`font-serif font-bold text-stone-900 leading-tight group-hover:underline decoration-1 underline-offset-4 decoration-stone-400 ${featured ? 'text-3xl md:text-4xl mb-4' : 'text-xl mb-3'}`}>
          {post.title}
        </h3>
        
        <p className={`text-stone-600 font-serif leading-relaxed line-clamp-3 ${featured ? 'text-lg mb-6' : 'text-sm mb-4'}`}>
          {post.excerpt}
        </p>

        <div className="mt-auto pt-2 flex items-center text-sm font-bold text-stone-900 group-hover:translate-x-1 transition-transform duration-300">
          阅读全文 <ArrowRight size={16} className="ml-2" />
        </div>
      </div>
    </div>
  );
};

// --- New Component: CreatePost (Lazy/AI Mode) ---

const CreatePost = ({ onPublish, onCancel }) => {
  const [step, setStep] = useState('input'); // 'input' | 'generating' | 'review'
  const [topic, setTopic] = useState('');
  const [content, setContent] = useState(''); // Added content state
  const [generatedPost, setGeneratedPost] = useState(null);

  // Simulate AI Generation or Manual Creation
  const handleGenerate = () => {
    if (!topic.trim()) return;
    setStep('generating');

    // 1. Manual Mode: If content is provided
    if (content.trim()) {
      setTimeout(() => {
        const newPost = {
          id: Date.now(),
          title: topic,
          excerpt: content.substring(0, 100).replace(/\n/g, ' ') + '...',
          category: "Original",
          date: new Date().toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' }),
          readTime: Math.max(1, Math.ceil(content.length / 500)) + " 分钟阅读",
          author: "Me",
          coverColor: getRandomColor(),
          content: (
            <>
              {content.split('\n').map((para, idx) => (
                 para.trim() && <p key={idx} className="mb-6">{para.trim()}</p>
              ))}
            </>
          )
        };
        setGeneratedPost(newPost);
        setStep('review');
      }, 1000);
      return;
    }

    // 2. AI Mode: Simulate generation (Existing logic)
    setTimeout(() => {
      const newPost = {
        id: Date.now(),
        title: `关于“${topic}”的深度思考与未来展望`,
        excerpt: `${topic} 正在重塑我们的认知边界。本文深入探讨了其核心机制、潜在影响以及我们应该如何应对这一变革...`,
        category: "AI Generated",
        date: new Date().toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' }),
        readTime: "3 分钟阅读",
        author: "Claude (AI)",
        coverColor: getRandomColor(), // Use random soft color
        content: (
          <>
            <p className="mb-6 first-letter:text-5xl first-letter:font-serif first-letter:font-bold first-letter:float-left first-letter:mr-3 first-letter:mt-[-4px]">
              当我们谈论 <strong>{topic}</strong> 时，我们实际上是在审视人类自身的创造力边界。这是一个激动人心的时代，技术的进步速度往往超过了我们的想象。
            </p>
            <h3 className="font-serif text-2xl font-medium mt-8 mb-4">核心视角的转变</h3>
            <p className="mb-6">
              对于 {topic} 的理解，不能仅仅停留在表面。我们需要深入挖掘其背后的逻辑。就像建筑师在设计摩天大楼之前需要了解地质结构一样，我们在拥抱新技术之前，也必须理解其基础原理。
            </p>
            <blockquote className="border-l-2 border-stone-800 pl-6 italic my-8 text-xl font-serif text-stone-700">
              "真正的创新往往来自于边缘地带，来自于那些看似不相关的领域之间的碰撞。"
            </blockquote>
            <p className="mb-6">
              综上所述，{topic} 不仅仅是一个趋势，它是一种信号。它提醒我们保持开放的心态，持续学习，在这个快速变化的世界中找到自己的位置。
            </p>
          </>
        )
      };
      setGeneratedPost(newPost);
      setStep('review');
    }, 2500);
  };

  return (
    <div className="max-w-3xl mx-auto px-6 py-20 min-h-[60vh] flex flex-col justify-center animate-in fade-in duration-500">
      
      {/* Step 1: Input */}
      {step === 'input' && (
        <div className="flex flex-col items-center text-center space-y-8">
          <div className="w-16 h-16 bg-stone-200 rounded-full flex items-center justify-center mb-4">
            <Sparkles className="text-stone-600" size={32} />
          </div>
          <h2 className="font-serif text-4xl md:text-5xl font-bold text-stone-900">
            今天想写点什么？
          </h2>
          <p className="text-stone-500 text-lg max-w-lg">
            输入一个话题让 AI 自动生成，或者直接贴入您写好的正文。
          </p>
          
          <div className="w-full max-w-xl relative mt-8 flex flex-col gap-6">
            <input 
              type="text" 
              value={topic}
              onChange={(e) => setTopic(e.target.value)}
              placeholder="请输入标题..."
              className="w-full bg-transparent border-b-2 border-stone-300 py-4 text-2xl md:text-3xl text-center font-serif text-stone-900 placeholder-stone-300 focus:border-stone-900 focus:outline-none transition-colors"
              autoFocus
            />

            <textarea
              value={content}
              onChange={(e) => setContent(e.target.value)}
              placeholder="（可选）在此处贴入正文... 如果留空，AI 将根据标题为您自动撰写全文。"
              className="w-full bg-[#FAFAF8] border border-stone-200 rounded-sm p-4 text-lg font-serif text-stone-700 placeholder-stone-300 focus:border-stone-900 focus:outline-none transition-colors min-h-[200px] resize-none shadow-inner"
            />
          </div>

          <div className="flex gap-4 mt-12">
             <button 
              onClick={onCancel}
              className="px-8 py-3 rounded-full text-stone-500 font-sans font-medium hover:bg-stone-200 transition-colors"
            >
              取消
            </button>
            <button 
              onClick={handleGenerate}
              disabled={!topic.trim()}
              className="group flex items-center gap-2 px-8 py-3 bg-stone-900 text-[#F4F3F0] rounded-full font-sans font-bold tracking-wide hover:bg-stone-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl hover:-translate-y-1"
            >
              <Sparkles size={18} />
              {content.trim() ? "预览文章" : "生成草稿"}
            </button>
          </div>
        </div>
      )}

      {/* Step 2: Generating Animation */}
      {step === 'generating' && (
        <div className="flex flex-col items-center justify-center text-center space-y-8">
          <div className="relative">
            <div className="absolute inset-0 bg-stone-300 rounded-full blur-xl opacity-20 animate-pulse"></div>
            <Loader2 className="animate-spin text-stone-900" size={48} />
          </div>
          <h3 className="font-serif text-2xl font-medium text-stone-700 animate-pulse">
            {content.trim() ? "正在排版整理..." : `正在构思关于“${topic}”的文章...`}
          </h3>
          <div className="flex flex-col gap-2 text-sm text-stone-400 font-sans">
            <span className="animate-in fade-in slide-in-from-bottom-2 duration-700 delay-100">正在分析语义...</span>
            <span className="animate-in fade-in slide-in-from-bottom-2 duration-700 delay-1000">正在配比色调...</span>
            <span className="animate-in fade-in slide-in-from-bottom-2 duration-700 delay-2000">正在撰写摘要...</span>
          </div>
        </div>
      )}

      {/* Step 3: Review */}
      {step === 'review' && generatedPost && (
        <div className="animate-in fade-in zoom-in-95 duration-500">
          <div className="text-center mb-10">
            <div className="inline-flex items-center gap-2 text-green-600 bg-green-50 px-4 py-2 rounded-full mb-4">
              <CheckCircle2 size={16} />
              <span className="text-sm font-bold uppercase tracking-wider">草稿已生成</span>
            </div>
            <h2 className="font-serif text-3xl md:text-4xl font-bold text-stone-900">
              效果预览
            </h2>
          </div>

          {/* Preview Card */}
          <div className="bg-white p-6 md:p-8 rounded-sm shadow-xl shadow-stone-200/50 border border-stone-100 mb-10 rotate-1 hover:rotate-0 transition-transform duration-500">
            {/* Color Block in Preview */}
            <div 
              className="aspect-[21/9] mb-6 overflow-hidden rounded-sm"
              style={{ backgroundColor: generatedPost.coverColor }}
            />
            
            <h3 className="font-serif text-3xl font-bold text-stone-900 mb-4">{generatedPost.title}</h3>
            <p className="font-serif text-lg text-stone-600 leading-relaxed mb-6">{generatedPost.excerpt}</p>
            <div className="flex items-center gap-4 text-xs font-bold text-stone-400 uppercase tracking-widest">
              <span>{generatedPost.category}</span>
              <span className="w-1 h-1 bg-stone-300 rounded-full"></span>
              <span>{generatedPost.date}</span>
            </div>
          </div>

          <div className="flex flex-col md:flex-row items-center justify-center gap-4">
             <button 
              onClick={() => { setStep('input'); setTopic(''); }}
              className="w-full md:w-auto px-8 py-3 rounded-full text-stone-500 font-sans font-medium hover:bg-stone-200 transition-colors"
            >
              放弃并重试
            </button>
            <button 
              onClick={() => onPublish(generatedPost)}
              className="w-full md:w-auto px-10 py-3 bg-[#D97757] text-white rounded-full font-sans font-bold tracking-wide hover:bg-[#c56645] transition-all shadow-lg hover:shadow-xl hover:-translate-y-1"
            >
              立即发布
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

const PostDetail = ({ post, onBack }) => {
  useEffect(() => {
    window.scrollTo(0, 0);
  }, []);

  return (
    <article className="animate-in fade-in slide-in-from-bottom-4 duration-500">
      {/* Back Button */}
      <div className="max-w-3xl mx-auto px-6 pt-12 pb-8">
        <button 
          onClick={onBack}
          className="group flex items-center text-sm font-medium text-stone-500 hover:text-stone-900 transition-colors mb-8"
        >
          <ArrowLeft size={16} className="mr-2 group-hover:-translate-x-1 transition-transform" />
          返回列表
        </button>

        {/* Header */}
        <header className="mb-12 text-center">
          <div className="flex items-center justify-center gap-3 text-xs font-bold tracking-widest text-[#D97757] uppercase mb-6 font-sans">
            <span>{post.category}</span>
            <span className="w-1 h-1 rounded-full bg-stone-300"></span>
            <span>{post.date}</span>
          </div>
          <h1 className="font-serif text-4xl md:text-5xl lg:text-6xl font-bold text-stone-900 leading-tight mb-8">
            {post.title}
          </h1>
          <div className="flex items-center justify-center gap-6 text-stone-500 text-sm font-sans">
            <div className="flex items-center gap-2">
              <span className="font-medium text-stone-900">{post.author}</span>
            </div>
            <div className="flex items-center gap-2">
              <Clock size={14} />
              <span>{post.readTime}</span>
            </div>
          </div>
        </header>
      </div>

      {/* Hero Color Block */}
      <div className="w-full max-w-5xl mx-auto px-4 sm:px-6 mb-16">
        <div 
          className="aspect-[21/9] overflow-hidden rounded-sm"
          style={{ backgroundColor: post.coverColor }}
        >
          {/* Empty div for color block, can add subtle grain or pattern here later if needed */}
        </div>
        <div className="text-center mt-2 text-xs text-stone-400 italic">
          Featured Color Theme
        </div>
      </div>

      {/* Content Body */}
      <div className="max-w-2xl mx-auto px-6 mb-20">
        {/* Changed prose-p:leading-loose to prose-p:leading-[2.2] for larger line height */}
        <div className="prose prose-stone prose-lg md:prose-xl prose-headings:font-serif prose-headings:font-bold prose-p:text-stone-700 prose-p:font-serif prose-p:leading-[2.2]">
          {post.content}
        </div>

        {/* Share Section */}
        <div className="mt-16 pt-8 border-t border-stone-200 flex items-center justify-between">
          <span className="font-sans text-sm font-bold text-stone-900">分享文章</span>
          <div className="flex gap-4">
             <button className="p-2 rounded-full hover:bg-stone-200 transition-colors text-stone-600"><Twitter size={18} /></button>
             <button className="p-2 rounded-full hover:bg-stone-200 transition-colors text-stone-600"><Linkedin size={18} /></button>
             <button className="p-2 rounded-full hover:bg-stone-200 transition-colors text-stone-600"><Mail size={18} /></button>
             <button className="p-2 rounded-full hover:bg-stone-200 transition-colors text-stone-600"><Share2 size={18} /></button>
          </div>
        </div>
      </div>
    </article>
  );
};

const BlogList = ({ posts, onPostClick }) => {
  const featuredPost = posts[0];
  const regularPosts = posts.slice(1);

  return (
    <div className="max-w-7xl mx-auto px-6 py-12 animate-in fade-in duration-700">
      <div className="mb-16 md:mb-24 pt-8 border-t border-stone-900">
        <h2 className="font-serif text-5xl md:text-7xl font-medium text-stone-900 mb-6 tracking-tight">
          Blog.
        </h2>
        <p className="font-serif text-xl md:text-2xl text-stone-500 max-w-2xl leading-relaxed">
          关于人工智能、设计哲学以及我们如何构建未来的思考与探索。
        </p>
      </div>

      {/* Featured Post */}
      {featuredPost && (
        <section className="mb-24">
          <BlogPostCard post={featuredPost} onClick={onPostClick} featured={true} />
        </section>
      )}

      {/* Grid Layout */}
      <section className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-16">
        {regularPosts.map(post => (
          <BlogPostCard key={post.id} post={post} onClick={onPostClick} />
        ))}
      </section>

      {/* Load More Button */}
      <div className="mt-24 text-center">
        <button className="inline-flex items-center px-8 py-4 border border-stone-300 text-stone-600 font-sans text-sm font-bold tracking-widest uppercase hover:bg-stone-900 hover:text-white hover:border-stone-900 transition-all duration-300 rounded-sm">
          查看更多文章
        </button>
      </div>
    </div>
  );
};

// --- Main App Component ---

const App = () => {
  const [view, setView] = useState('list'); // 'list' | 'detail' | 'create'
  const [currentPost, setCurrentPost] = useState(null);
  const [posts, setPosts] = useState(INITIAL_POSTS);

  const handlePostClick = (post) => {
    setCurrentPost(post);
    setView('detail');
  };

  const handleHomeClick = () => {
    setView('list');
    setCurrentPost(null);
  };

  const handleCreateClick = () => {
    setView('create');
    setCurrentPost(null);
  };

  const handlePublish = (newPost) => {
    setPosts([newPost, ...posts]);
    setView('list');
    window.scrollTo(0, 0);
  };

  return (
    <div className="min-h-screen bg-[#F4F3F0] text-[#191919] font-sans selection:bg-[#D97757] selection:text-white flex flex-col">
      {/* Global Style overrides for fonts to match Claude style more closely */}
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;0,600;0,700;1,400&family=Inter:wght@400;500;600&display=swap');
        
        .font-serif {
          font-family: 'Crimson Pro', serif;
        }
        .font-sans {
          font-family: 'Inter', sans-serif;
        }
      `}</style>

      <Header 
        onHomeClick={handleHomeClick} 
        onCreateClick={handleCreateClick}
        currentView={view}
      />

      <main className="flex-grow">
        {view === 'list' && (
          <BlogList posts={posts} onPostClick={handlePostClick} />
        )}
        {view === 'detail' && (
          <PostDetail post={currentPost} onBack={handleHomeClick} />
        )}
        {view === 'create' && (
          <CreatePost 
            onPublish={handlePublish} 
            onCancel={handleHomeClick}
          />
        )}
      </main>

      <Footer />
    </div>
  );
};

export default App;
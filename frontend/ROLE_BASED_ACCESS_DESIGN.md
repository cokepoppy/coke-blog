# åšå®¢ç³»ç»Ÿè§’è‰²æƒé™è®¾è®¡æ–¹æ¡ˆ

## è§’è‰²å®šä¹‰

### 1. æµè§ˆè€… (Visitor)
**æƒé™çº§åˆ«**: åŸºç¡€è®¿é—®æƒé™

**å¯ä»¥åšçš„äº‹æƒ…**:
- âœ… æµè§ˆæ‰€æœ‰å·²å‘å¸ƒçš„æ–‡ç« 
- âœ… é˜…è¯»æ–‡ç« è¯¦æƒ…
- âœ… æœç´¢å’Œç­›é€‰æ–‡ç« 
- âœ… åˆ†äº«æ–‡ç« åˆ°ç¤¾äº¤åª’ä½“
- âœ… æŸ¥çœ‹æ–‡ç« åˆ†ç±»å’Œæ ‡ç­¾
- âœ… è¯„è®ºæ–‡ç« ï¼ˆéœ€ç™»å½•ï¼‰
- âœ… ç‚¹èµæ–‡ç« ï¼ˆéœ€ç™»å½•ï¼‰

**ä¸èƒ½åšçš„äº‹æƒ…**:
- âŒ åˆ›å»ºæ–°æ–‡ç« 
- âŒ ç¼–è¾‘æˆ–åˆ é™¤æ–‡ç« 
- âŒ è®¿é—®ç®¡ç†åå°
- âŒ æŸ¥çœ‹è‰ç¨¿çŠ¶æ€æ–‡ç« 
- âŒ ç®¡ç†ç”¨æˆ·

### 2. ç®¡ç†å‘˜ (Admin)
**æƒé™çº§åˆ«**: å®Œå…¨è®¿é—®æƒé™

**å¯ä»¥åšçš„äº‹æƒ…**:
- âœ… æµè§ˆè€…çš„æ‰€æœ‰æƒé™
- âœ… åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ–‡ç« 
- âœ… ç®¡ç†æ–‡ç« çŠ¶æ€ï¼ˆè‰ç¨¿/å·²å‘å¸ƒ/å½’æ¡£ï¼‰
- âœ… è®¿é—®ç®¡ç†åå°
- âœ… æŸ¥çœ‹ç½‘ç«™ç»Ÿè®¡æ•°æ®
- âœ… ç®¡ç†åˆ†ç±»å’Œæ ‡ç­¾
- âœ… å®¡æ ¸å’Œç®¡ç†è¯„è®º
- âœ… ç®¡ç†ç”¨æˆ·ï¼ˆå¯é€‰ï¼‰
- âœ… é…ç½®ç½‘ç«™è®¾ç½®

---

## UI/UX è®¾è®¡

### æµè§ˆè€…è§†å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MyBlog.    é¦–é¡µ  ä¸“æ   å…³äº  [ç™»å½•]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Blog.                                  â”‚
â”‚  å…³äºäººå·¥æ™ºèƒ½ã€è®¾è®¡å“²å­¦...              â”‚
â”‚                                         â”‚
â”‚  [æ–‡ç« åˆ—è¡¨å¡ç‰‡]                         â”‚
â”‚  - æ ‡é¢˜                                 â”‚
â”‚  - æ‘˜è¦                                 â”‚
â”‚  - åˆ†ç±»ã€æ—¥æœŸã€é˜…è¯»æ—¶é—´                â”‚
â”‚  - [é˜…è¯»å…¨æ–‡] æŒ‰é’®                      â”‚
â”‚                                         â”‚
â”‚  [æŸ¥çœ‹æ›´å¤šæ–‡ç« ]                         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŠŸèƒ½ï¼š
- åªèƒ½çœ‹åˆ°å·²å‘å¸ƒçš„æ–‡ç« 
- æ²¡æœ‰"å¼€å§‹åˆ›ä½œ"æŒ‰é’®
- æ²¡æœ‰ç¼–è¾‘/åˆ é™¤æ“ä½œ
```

### ç®¡ç†å‘˜è§†å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MyBlog.  é¦–é¡µ ä¸“æ  å…³äº [åå°] [å¼ ä¸‰â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Blog.                     [å¼€å§‹åˆ›ä½œ]   â”‚
â”‚  å…³äºäººå·¥æ™ºèƒ½ã€è®¾è®¡å“²å­¦...              â”‚
â”‚                                         â”‚
â”‚  [æ–‡ç« åˆ—è¡¨å¡ç‰‡]                         â”‚
â”‚  - æ ‡é¢˜                    [ç¼–è¾‘][åˆ é™¤] â”‚
â”‚  - æ‘˜è¦                                 â”‚
â”‚  - åˆ†ç±»ã€æ—¥æœŸã€é˜…è¯»æ—¶é—´                â”‚
â”‚  - çŠ¶æ€: å·²å‘å¸ƒ / è‰ç¨¿                 â”‚
â”‚  - [é˜…è¯»å…¨æ–‡]                           â”‚
â”‚                                         â”‚
â”‚  [æŸ¥çœ‹æ›´å¤šæ–‡ç« ]                         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŠŸèƒ½ï¼š
- å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ–‡ç« ï¼ˆåŒ…æ‹¬è‰ç¨¿ï¼‰
- æœ‰"å¼€å§‹åˆ›ä½œ"æŒ‰é’®
- æœ‰"åå°ç®¡ç†"å…¥å£
- æ¯ç¯‡æ–‡ç« æœ‰ç¼–è¾‘/åˆ é™¤æŒ‰é’®
- æ˜¾ç¤ºæ–‡ç« çŠ¶æ€æ ‡ç­¾
```

---

## å‰ç«¯å®ç°æ–¹æ¡ˆ

### 1. ç”¨æˆ·çŠ¶æ€ç®¡ç†

**ä½¿ç”¨ React Context ç®¡ç†ç”¨æˆ·çŠ¶æ€**

```typescript
// src/contexts/AuthContext.tsx
import { createContext, useContext, useState, useEffect } from 'react';

export type UserRole = 'visitor' | 'admin';

interface User {
  id: string;
  name: string;
  email: string;
  role: UserRole;
  avatar?: string;
}

interface AuthContextType {
  user: User | null;
  isAuthenticated: boolean;
  isAdmin: boolean;
  login: (email: string, password: string) => Promise<void>;
  logout: () => void;
  checkAuth: () => void;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export const AuthProvider = ({ children }: { children: React.ReactNode }) => {
  const [user, setUser] = useState<User | null>(null);

  const isAuthenticated = !!user;
  const isAdmin = user?.role === 'admin';

  const login = async (email: string, password: string) => {
    // è°ƒç”¨åç«¯ API ç™»å½•
    const response = await fetch('/api/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ email, password }),
    });

    if (response.ok) {
      const data = await response.json();
      setUser(data.user);
      localStorage.setItem('token', data.token);
    }
  };

  const logout = () => {
    setUser(null);
    localStorage.removeItem('token');
  };

  const checkAuth = async () => {
    const token = localStorage.getItem('token');
    if (token) {
      // éªŒè¯ token å¹¶è·å–ç”¨æˆ·ä¿¡æ¯
      const response = await fetch('/api/auth/me', {
        headers: { Authorization: `Bearer ${token}` },
      });

      if (response.ok) {
        const data = await response.json();
        setUser(data.user);
      }
    }
  };

  useEffect(() => {
    checkAuth();
  }, []);

  return (
    <AuthContext.Provider value={{ user, isAuthenticated, isAdmin, login, logout, checkAuth }}>
      {children}
    </AuthContext.Provider>
  );
};

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within AuthProvider');
  }
  return context;
};
```

### 2. æƒé™æ§åˆ¶ç»„ä»¶

```typescript
// src/components/ProtectedRoute.tsx
import { useAuth } from '../contexts/AuthContext';
import { Navigate } from 'react-router-dom';

interface ProtectedRouteProps {
  children: React.ReactNode;
  requireAdmin?: boolean;
}

export const ProtectedRoute = ({ children, requireAdmin = false }: ProtectedRouteProps) => {
  const { isAuthenticated, isAdmin } = useAuth();

  if (!isAuthenticated) {
    return <Navigate to="/login" replace />;
  }

  if (requireAdmin && !isAdmin) {
    return <Navigate to="/" replace />;
  }

  return <>{children}</>;
};
```

```typescript
// src/components/AdminOnly.tsx
import { useAuth } from '../contexts/AuthContext';

interface AdminOnlyProps {
  children: React.ReactNode;
  fallback?: React.ReactNode;
}

export const AdminOnly = ({ children, fallback = null }: AdminOnlyProps) => {
  const { isAdmin } = useAuth();
  return isAdmin ? <>{children}</> : <>{fallback}</>;
};
```

### 3. æ›´æ–° Header ç»„ä»¶

```typescript
// src/components/Header.tsx
import { useAuth } from '../contexts/AuthContext';
import { AdminOnly } from './AdminOnly';

const Header = ({ onHomeClick, onCreateClick, currentView }: HeaderProps) => {
  const { user, isAuthenticated, logout } = useAuth();

  return (
    <header className="sticky top-0 z-50 bg-[#F4F3F0]/90 backdrop-blur-md border-b border-stone-200">
      <div className="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
        {/* Logo */}
        <div onClick={onHomeClick} className="cursor-pointer group flex items-center gap-2">
          <span className="font-serif text-2xl font-bold tracking-tight text-stone-900">
            MyBlog.
          </span>
        </div>

        {/* Navigation */}
        <nav className="hidden md:flex items-center gap-8 font-sans text-sm font-medium text-stone-600">
          <a href="#" onClick={(e) => { e.preventDefault(); onHomeClick(); }}>
            é¦–é¡µ
          </a>
          <a href="#" className="hover:text-stone-900 transition-colors">
            ä¸“æ 
          </a>
          <a href="#" className="hover:text-stone-900 transition-colors">
            å…³äº
          </a>

          {/* ç®¡ç†å‘˜ä¸“å±é“¾æ¥ */}
          <AdminOnly>
            <a href="#" className="hover:text-stone-900 transition-colors">
              åå°ç®¡ç†
            </a>
          </AdminOnly>

          {/* ç”¨æˆ·èœå• */}
          {isAuthenticated ? (
            <div className="flex items-center gap-4">
              <AdminOnly>
                <button
                  onClick={onCreateClick}
                  className="flex items-center gap-2 bg-stone-900 text-[#F4F3F0] px-5 py-2.5 rounded-sm hover:bg-stone-700 transition-all"
                >
                  <PenLine size={16} />
                  <span>å¼€å§‹åˆ›ä½œ</span>
                </button>
              </AdminOnly>

              <div className="relative group">
                <button className="flex items-center gap-2">
                  <span>{user?.name}</span>
                  <ChevronDown size={16} />
                </button>

                {/* ä¸‹æ‹‰èœå• */}
                <div className="absolute right-0 top-full mt-2 w-48 bg-white rounded-sm shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all">
                  <a href="#" className="block px-4 py-2 hover:bg-stone-100">
                    ä¸ªäººèµ„æ–™
                  </a>
                  <AdminOnly>
                    <a href="#" className="block px-4 py-2 hover:bg-stone-100">
                      æ–‡ç« ç®¡ç†
                    </a>
                  </AdminOnly>
                  <button
                    onClick={logout}
                    className="w-full text-left px-4 py-2 hover:bg-stone-100 text-red-600"
                  >
                    é€€å‡ºç™»å½•
                  </button>
                </div>
              </div>
            </div>
          ) : (
            <a
              href="/login"
              className="flex items-center gap-2 bg-stone-900 text-[#F4F3F0] px-5 py-2.5 rounded-sm hover:bg-stone-700 transition-all"
            >
              ç™»å½•
            </a>
          )}
        </nav>
      </div>
    </header>
  );
};
```

### 4. æ–‡ç« å¡ç‰‡ç»„ä»¶ï¼ˆå¸¦ç®¡ç†åŠŸèƒ½ï¼‰

```typescript
// src/components/BlogPostCard.tsx
const BlogPostCard = ({ post, onClick, featured = false }: BlogPostCardProps) => {
  const { isAdmin } = useAuth();

  const handleEdit = (e: React.MouseEvent) => {
    e.stopPropagation();
    // è·³è½¬åˆ°ç¼–è¾‘é¡µé¢
    window.location.href = `/admin/posts/${post.id}/edit`;
  };

  const handleDelete = async (e: React.MouseEvent) => {
    e.stopPropagation();
    if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ç¯‡æ–‡ç« å—ï¼Ÿ')) {
      await fetch(`/api/posts/${post.id}`, { method: 'DELETE' });
      // åˆ·æ–°åˆ—è¡¨
    }
  };

  return (
    <div className={`group cursor-pointer flex flex-col ${featured ? 'md:grid md:grid-cols-2 md:gap-12' : ''}`}>
      {/* å°é¢å›¾ */}
      <div
        className="overflow-hidden rounded-sm mb-6"
        style={{ backgroundColor: post.coverColor }}
      >
        {/* ç®¡ç†å‘˜æ“ä½œæŒ‰é’® */}
        <AdminOnly>
          <div className="absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
            <button
              onClick={handleEdit}
              className="bg-white px-3 py-1 rounded-sm text-sm font-medium hover:bg-stone-100"
            >
              ç¼–è¾‘
            </button>
            <button
              onClick={handleDelete}
              className="bg-red-500 text-white px-3 py-1 rounded-sm text-sm font-medium hover:bg-red-600"
            >
              åˆ é™¤
            </button>
          </div>
        </AdminOnly>
      </div>

      <div className="flex flex-col h-full justify-center">
        {/* åˆ†ç±»å’Œæ—¥æœŸ */}
        <div className="flex items-center gap-3 text-xs font-bold tracking-widest uppercase mb-3">
          <span className="text-[#D97757]">{post.category}</span>
          <span className="w-1 h-1 rounded-full bg-stone-300"></span>
          <span className="text-stone-500 font-medium">{post.date}</span>

          {/* çŠ¶æ€æ ‡ç­¾ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰ */}
          <AdminOnly>
            <span className={`px-2 py-1 rounded text-xs ${
              post.status === 'published'
                ? 'bg-green-100 text-green-700'
                : 'bg-yellow-100 text-yellow-700'
            }`}>
              {post.status === 'published' ? 'å·²å‘å¸ƒ' : 'è‰ç¨¿'}
            </span>
          </AdminOnly>
        </div>

        <h3 className="font-serif font-bold text-stone-900 leading-tight group-hover:underline">
          {post.title}
        </h3>

        <p className="text-stone-600 font-serif leading-relaxed line-clamp-3">
          {post.excerpt}
        </p>

        <div className="mt-auto pt-2 flex items-center text-sm font-bold text-stone-900">
          é˜…è¯»å…¨æ–‡ <ArrowRight size={16} className="ml-2" />
        </div>
      </div>
    </div>
  );
};
```

### 5. ç™»å½•é¡µé¢

```typescript
// src/pages/Login.tsx
import { useState } from 'react';
import { useAuth } from '../contexts/AuthContext';
import { useNavigate } from 'react-router-dom';

const Login = () => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const { login } = useAuth();
  const navigate = useNavigate();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');

    try {
      await login(email, password);
      navigate('/');
    } catch (err) {
      setError('ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é‚®ç®±å’Œå¯†ç ');
    }
  };

  return (
    <div className="min-h-screen bg-[#F4F3F0] flex items-center justify-center px-6">
      <div className="max-w-md w-full bg-white rounded-sm shadow-lg p-8">
        <h2 className="font-serif text-3xl font-bold text-stone-900 mb-6 text-center">
          ç™»å½•åˆ° MyBlog
        </h2>

        {error && (
          <div className="bg-red-50 text-red-600 px-4 py-3 rounded-sm mb-6">
            {error}
          </div>
        )}

        <form onSubmit={handleSubmit}>
          <div className="mb-4">
            <label className="block text-stone-700 font-medium mb-2">
              é‚®ç®±
            </label>
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              className="w-full px-4 py-3 border border-stone-300 rounded-sm focus:outline-none focus:border-stone-900"
              required
            />
          </div>

          <div className="mb-6">
            <label className="block text-stone-700 font-medium mb-2">
              å¯†ç 
            </label>
            <input
              type="password"
              value={password}
              onChange={(e) => setPassword(e.target.value)}
              className="w-full px-4 py-3 border border-stone-300 rounded-sm focus:outline-none focus:border-stone-900"
              required
            />
          </div>

          <button
            type="submit"
            className="w-full bg-stone-900 text-white py-3 rounded-sm font-medium hover:bg-stone-700 transition-all"
          >
            ç™»å½•
          </button>
        </form>

        <div className="mt-6 text-center text-sm text-stone-500">
          <p>æµ‹è¯•è´¦å·:</p>
          <p>ç®¡ç†å‘˜: admin@myblog.com / admin123</p>
          <p>æµè§ˆè€…: visitor@myblog.com / visitor123</p>
        </div>
      </div>
    </div>
  );
};
```

### 6. åå°ç®¡ç†é¡µé¢ï¼ˆç®¡ç†å‘˜ä¸“å±ï¼‰

```typescript
// src/pages/AdminDashboard.tsx
import { useAuth } from '../contexts/AuthContext';
import { Navigate } from 'react-router-dom';

const AdminDashboard = () => {
  const { isAdmin } = useAuth();

  if (!isAdmin) {
    return <Navigate to="/" replace />;
  }

  return (
    <div className="min-h-screen bg-[#F4F3F0]">
      <div className="max-w-7xl mx-auto px-6 py-12">
        <h1 className="font-serif text-4xl font-bold text-stone-900 mb-8">
          ç®¡ç†åå°
        </h1>

        {/* ç»Ÿè®¡å¡ç‰‡ */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
          <div className="bg-white p-6 rounded-sm shadow">
            <h3 className="text-stone-500 text-sm font-medium mb-2">æ€»æ–‡ç« æ•°</h3>
            <p className="text-3xl font-bold text-stone-900">24</p>
          </div>
          <div className="bg-white p-6 rounded-sm shadow">
            <h3 className="text-stone-500 text-sm font-medium mb-2">æ€»æµè§ˆé‡</h3>
            <p className="text-3xl font-bold text-stone-900">1,234</p>
          </div>
          <div className="bg-white p-6 rounded-sm shadow">
            <h3 className="text-stone-500 text-sm font-medium mb-2">è¯„è®ºæ•°</h3>
            <p className="text-3xl font-bold text-stone-900">89</p>
          </div>
        </div>

        {/* å¿«æ·æ“ä½œ */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          <a
            href="/admin/posts"
            className="bg-white p-8 rounded-sm shadow hover:shadow-lg transition-shadow"
          >
            <h3 className="font-serif text-2xl font-bold text-stone-900 mb-2">
              æ–‡ç« ç®¡ç†
            </h3>
            <p className="text-stone-600">
              æŸ¥çœ‹ã€ç¼–è¾‘å’Œç®¡ç†æ‰€æœ‰æ–‡ç« 
            </p>
          </a>

          <a
            href="/admin/comments"
            className="bg-white p-8 rounded-sm shadow hover:shadow-lg transition-shadow"
          >
            <h3 className="font-serif text-2xl font-bold text-stone-900 mb-2">
              è¯„è®ºç®¡ç†
            </h3>
            <p className="text-stone-600">
              å®¡æ ¸å’Œç®¡ç†ç”¨æˆ·è¯„è®º
            </p>
          </a>

          <a
            href="/admin/categories"
            className="bg-white p-8 rounded-sm shadow hover:shadow-lg transition-shadow"
          >
            <h3 className="font-serif text-2xl font-bold text-stone-900 mb-2">
              åˆ†ç±»ç®¡ç†
            </h3>
            <p className="text-stone-600">
              ç®¡ç†æ–‡ç« åˆ†ç±»å’Œæ ‡ç­¾
            </p>
          </a>

          <a
            href="/admin/settings"
            className="bg-white p-8 rounded-sm shadow hover:shadow-lg transition-shadow"
          >
            <h3 className="font-serif text-2xl font-bold text-stone-900 mb-2">
              ç½‘ç«™è®¾ç½®
            </h3>
            <p className="text-stone-600">
              é…ç½®ç½‘ç«™åŸºæœ¬ä¿¡æ¯å’Œå‚æ•°
            </p>
          </a>
        </div>
      </div>
    </div>
  );
};
```

---

## åç«¯ API è®¾è®¡

### 1. è®¤è¯ç›¸å…³ API

```
POST /api/auth/register
POST /api/auth/login
POST /api/auth/logout
GET  /api/auth/me
POST /api/auth/refresh
```

### 2. æ–‡ç« ç›¸å…³ API

```
GET    /api/posts              # è·å–æ–‡ç« åˆ—è¡¨ï¼ˆæµè§ˆè€…åªèƒ½çœ‹å·²å‘å¸ƒï¼‰
GET    /api/posts/:id          # è·å–æ–‡ç« è¯¦æƒ…
POST   /api/posts              # åˆ›å»ºæ–‡ç« ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
PUT    /api/posts/:id          # æ›´æ–°æ–‡ç« ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
DELETE /api/posts/:id          # åˆ é™¤æ–‡ç« ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
PATCH  /api/posts/:id/publish  # å‘å¸ƒæ–‡ç« ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
```

### 3. è¯„è®ºç›¸å…³ API

```
GET    /api/posts/:id/comments     # è·å–æ–‡ç« è¯„è®º
POST   /api/posts/:id/comments     # æ·»åŠ è¯„è®ºï¼ˆéœ€è¦ç™»å½•ï¼‰
DELETE /api/comments/:id           # åˆ é™¤è¯„è®ºï¼ˆç®¡ç†å‘˜æˆ–è¯„è®ºä½œè€…ï¼‰
```

---

## æ•°æ®åº“è®¾è®¡

### Users è¡¨

```sql
CREATE TABLE users (
  id VARCHAR(36) PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  role ENUM('visitor', 'admin') DEFAULT 'visitor',
  avatar VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### Posts è¡¨

```sql
CREATE TABLE posts (
  id VARCHAR(36) PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  excerpt TEXT,
  content TEXT NOT NULL,
  cover_color VARCHAR(20),
  category VARCHAR(50),
  author_id VARCHAR(36),
  status ENUM('draft', 'published', 'archived') DEFAULT 'draft',
  read_time INT,
  views INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  published_at TIMESTAMP NULL,
  FOREIGN KEY (author_id) REFERENCES users(id) ON DELETE CASCADE
);
```

### Comments è¡¨

```sql
CREATE TABLE comments (
  id VARCHAR(36) PRIMARY KEY,
  post_id VARCHAR(36) NOT NULL,
  user_id VARCHAR(36) NOT NULL,
  content TEXT NOT NULL,
  status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (post_id) REFERENCES posts(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
```

---

## å®‰å…¨è€ƒè™‘

### 1. è®¤è¯å’Œæˆæƒ

- ä½¿ç”¨ JWT (JSON Web Token) è¿›è¡Œèº«ä»½éªŒè¯
- Token å­˜å‚¨åœ¨ localStorage æˆ– httpOnly cookie
- æ¯ä¸ªè¯·æ±‚åœ¨ header ä¸­æºå¸¦ token
- åç«¯éªŒè¯ token å’Œç”¨æˆ·è§’è‰²

### 2. å¯†ç å®‰å…¨

- ä½¿ç”¨ bcrypt å¯¹å¯†ç è¿›è¡Œå“ˆå¸Œ
- æœ€å°å¯†ç é•¿åº¦: 8 å­—ç¬¦
- å¯†ç å¤æ‚åº¦è¦æ±‚: å­—æ¯ + æ•°å­—

### 3. API å®‰å…¨

- CORS é…ç½®é™åˆ¶æ¥æº
- Rate limiting é˜²æ­¢æš´åŠ›ç ´è§£
- è¾“å…¥éªŒè¯å’Œæ¸…ç†
- SQL æ³¨å…¥é˜²æŠ¤
- XSS é˜²æŠ¤

### 4. æƒé™éªŒè¯ä¸­é—´ä»¶

```typescript
// åç«¯ä¸­é—´ä»¶ç¤ºä¾‹
const requireAuth = (req, res, next) => {
  const token = req.headers.authorization?.split(' ')[1];

  if (!token) {
    return res.status(401).json({ error: 'æœªæˆæƒ' });
  }

  try {
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'Token æ— æ•ˆ' });
  }
};

const requireAdmin = (req, res, next) => {
  if (req.user.role !== 'admin') {
    return res.status(403).json({ error: 'éœ€è¦ç®¡ç†å‘˜æƒé™' });
  }
  next();
};

// ä½¿ç”¨
app.post('/api/posts', requireAuth, requireAdmin, createPost);
app.delete('/api/posts/:id', requireAuth, requireAdmin, deletePost);
```

---

## å®æ–½æ­¥éª¤

### Phase 1: åŸºç¡€è®¤è¯ (1-2 å¤©)
1. âœ… åˆ›å»ºç”¨æˆ·è¡¨å’Œè®¤è¯ API
2. âœ… å®ç°ç™»å½•/æ³¨å†ŒåŠŸèƒ½
3. âœ… æ·»åŠ  JWT token ç”Ÿæˆå’ŒéªŒè¯
4. âœ… åˆ›å»º AuthContext å’Œ useAuth hook

### Phase 2: è§’è‰²æƒé™ (1-2 å¤©)
1. âœ… å®ç°è§’è‰²æ£€æŸ¥ä¸­é—´ä»¶
2. âœ… åˆ›å»º ProtectedRoute å’Œ AdminOnly ç»„ä»¶
3. âœ… æ›´æ–° Header æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
4. âœ… æ ¹æ®è§’è‰²æ˜¾ç¤º/éšè—åŠŸèƒ½

### Phase 3: ç®¡ç†åŠŸèƒ½ (2-3 å¤©)
1. âœ… åˆ›å»ºç®¡ç†åå°é¡µé¢
2. âœ… å®ç°æ–‡ç« ç®¡ç† CRUD
3. âœ… æ·»åŠ æ–‡ç« çŠ¶æ€ç®¡ç†
4. âœ… å®ç°è¯„è®ºç®¡ç†åŠŸèƒ½

### Phase 4: ä¼˜åŒ–å’Œæµ‹è¯• (1-2 å¤©)
1. âœ… æ·»åŠ é”™è¯¯å¤„ç†
2. âœ… æ€§èƒ½ä¼˜åŒ–
3. âœ… å®‰å…¨æµ‹è¯•
4. âœ… UI/UX ä¼˜åŒ–

**é¢„è®¡æ€»æ—¶é—´: 5-9 å¤©**

---

## æµ‹è¯•ç”¨æˆ·

### ç®¡ç†å‘˜è´¦å·
```
é‚®ç®±: admin@myblog.com
å¯†ç : admin123
è§’è‰²: admin
```

### æµè§ˆè€…è´¦å·
```
é‚®ç®±: visitor@myblog.com
å¯†ç : visitor123
è§’è‰²: visitor
```

---

## è§†è§‰è®¾è®¡å»ºè®®

### è§’è‰²æ ‡è¯†
- ç®¡ç†å‘˜ç”¨æˆ·åæ—æ˜¾ç¤º ğŸ›¡ï¸ å›¾æ ‡
- ç®¡ç†å‘˜è¯„è®ºå¸¦æœ‰"ç®¡ç†å‘˜"æ ‡ç­¾
- è‰ç¨¿æ–‡ç« æœ‰æ˜æ˜¾çš„è§†è§‰åŒºåˆ†

### é…è‰²æ–¹æ¡ˆ
- ç®¡ç†å‘˜æ“ä½œæŒ‰é’®: æ·±è‰²ç³» (#1a1a1a)
- å±é™©æ“ä½œ: çº¢è‰² (#DC2626)
- æˆåŠŸçŠ¶æ€: ç»¿è‰² (#16A34A)
- è­¦å‘ŠçŠ¶æ€: é»„è‰² (#EAB308)

---

## æœªæ¥æ‰©å±•

### å¯é€‰åŠŸèƒ½
1. **ç¼–è¾‘è€…è§’è‰²** - ä»‹äºæµè§ˆè€…å’Œç®¡ç†å‘˜ä¹‹é—´
2. **ä½œè€…è§’è‰²** - å¯ä»¥åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„æ–‡ç« 
3. **ç‰ˆæœ¬å†å²** - æ–‡ç« ä¿®æ”¹å†å²è®°å½•
4. **å·¥ä½œæµ** - æ–‡ç« å®¡æ ¸æµç¨‹
5. **æƒé™ç»†ç²’åº¦æ§åˆ¶** - æ›´è¯¦ç»†çš„æƒé™è®¾ç½®

---

è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæ˜¯å¦ç¬¦åˆä½ çš„éœ€æ±‚ï¼Ÿæˆ‘å¯ä»¥å¼€å§‹å®ç°ä»»ä½•éƒ¨åˆ†ï¼
